<!DOCTYPE html>
<html>
    <head>
        <title>COVA et al.</title>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/jspsych.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-fullscreen.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-sperling-canvas.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-html-button-response.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-survey-multi-choice.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-survey-text.js"></script>
        <script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-html-slider-response.js"></script>
	<script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-external-html.js"></script>
	<script src="https://apfahler.github.io/jsPsychSheet/jspsych/plugins/jspsych-instructions.js"></script>
        <link href="https://apfahler.github.io/jsPsychSheet/jspsych/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    </head>
    <script>
        timeline = []; 
        
        timeline.push({
            type: 'fullscreen',
            fullscreen_mode: true
            });
     
        var intro = [];
            
            var welcome = {
                type: "html-keyboard-response",
                stimulus: "Welcome to the experiment. Press any key to begin."
            }
            var consent = {
                type:'external-html',
                url: "https://apfahler.github.io/jsPsychSheet/jspsych/plugins/consent.html",
                cont_btn: "start",
            }
            //add consent  form external html plugin
            var instructions = {
                type: 'instructions',
                pages: [
                        'In this experiment you will be asked to report as many letters as you can from <br> an array of 12 letters that will be briefly displayed on the screen.',
                        'The whole experiment will be divided into three blocks.<br> Each block will constist of 20 trials. <br> After each block you will be asked to complete a questionnaire.<br> At the end of the three blocks you will be asked to complete a brief interview were you answers will be recorded.',
                        'Before you start the experiment you will participate in a practice trial. <br> An array of 12 letters will be displayed briefly on the screen <br> and you will be asked to record as many letter from the array as you can.'
                        ],
                show_clickable_nav: true
            }
        var intro = {
           timeline: [welcome, instructions],
       }
//transition
timeline.push(intro);
                
    var practice_trial = [];

       var fixation = {
       type: "html-keyboard-response",
       stimulus: '<p style="font-size: 48px; color:red;">+</p>',
       choices: jsPsych.NO_KEYS,
       trial_duration: 500
   }
       var test = {
           type: "sperling-canvas",
           trial_duration: 1000
           //maybe say in instructions that this practice is slower than the real experiment
   }
       var blank_screen = {
       type: "html-keyboard-response",
       stimulus: "",
       choices: jsPsych.NO_KEYS,
       trial_duration: 500
   }
       var letters = {
       type: "survey-text",
       questions: [
           {prompt: "Please enter all the letters you saw."}, 
           ],
   }
        var question = {    
            type: "html-button-response",
            stimulus: '<p> Have you ever heard of an experiment that used these stimuli before? <br> OR <br> Have you participated in a task that showed you a letter grid that looked like this?</p>',
            choices: ['YES','NO'],
        };
       var practice_trial = {
           timeline: [fixation, test, blank_screen, letters, question],
       }
//transition
timeline.push(practice_trial);

                    var start = {
                    type: 'html-keyboard-response',
                    stimulus: 'The experiment will begin now.'
                }
                timeline.push(start); 


        var stimulus_block_1 = []; 
                    
                    var fixation = {
                    type: "html-keyboard-response",
                    stimulus: '<p style="font-size: 48px; color:red;">+</p>',
                    choices: jsPsych.NO_KEYS,
                    trial_duration: 500
                }
                    var test = {
                        type: "sperling-canvas",
                        trial_duration: 300
                }
                    var blank_screen = {
                    type: "html-keyboard-response",
                    stimulus: "",
                    choices: jsPsych.NO_KEYS,
                    trial_duration: 500
                }
                    var letters = {
                    type: "survey-text",
                    questions: [
                        {prompt: "Please enter all the letters you saw."}, 
                        ],
                }
                    var stimulus_block_1 = {
                        timeline: [fixation, test, blank_screen, letters],
                        repetitions: 3
                    }
            
timeline.push(stimulus_block_1);


        var questions_block_1 = [];

        var question_1 = {    
            type: "html-button-response",
            stimulus: '<p> In general, did you feel like you saw all the letters displayed on the screen?</p>',
            choices: ['YES','NO','I Do Not Know'], //can't write don't because ' is an issue
        };
            timeline.push(question_1);

        var follow_up_1 = {
            type: 'html-slider-response',
            stimulus: '<p>I am _______ % certain of my response.</p>',
            labels: ['0%','50%', '100%'],
            prompt: '<p>How certain are you of your response to question 1, on a (0-100)% scale, with low numbers indicating that you are not sure and high numbers indicating that you are sure?</p>',
        };
            timeline.push(follow_up_1);
        
        var page_1_options = ["I felt like I saw all the letters in detail and was able to identify them at this time.", "I felt like I saw all the letters in detail, but without necessarily being able to identify them and tell which letters they were at this time.", "I felt like I saw all the letters, but not in detail: I just saw where they were, and that they were letters.", "I felt like I saw most letters, but not all.", "I felt like I saw only a small part of the letters.","I felt like I saw nothing."];

        var question_2 = {
             type: "survey-multi-choice",
             questions: [
             {prompt: "Think about what you experienced during the block that just ended. Which of the following statements best describe what you experienced when the letters were displayed on the screen?", options: page_1_options, required: true}, 
                ],
        };  
            timeline.push(question_2); 

        var follow_up_2 = {
            type: 'html-slider-response',
            stimulus: "<p>I am _______ % certain of my response.</p>",
            labels: ['0%','50%', '100%'],
            prompt: "<p>How certain are you of your response to question 2, on a (0-100)% scale, with low numbers indicating that you are not sure and high numbers indicating that you are sure?</p>",
        };
            timeline.push(follow_up_2);
    

        //add a slide that explains the goal of this experiment and what the next section is going to ask them to do (Interview section of supplemental materials)

    var interview = []; 

        var question_a = {
            type: 'survey-text',
            questions:  [
                {prompt: "Describe in your own words what you saw when the letters were displayed on the screen."}, 
                ],
        };
            timeline.push(question_a); // change plugin for this question

        var theory = {
            type: 'html-keyboard-response',
            stimulus: "add the two theories?"
        }; 
        //use instructions plugin
            timeline.push(theory);

        var question_b = {    
            type: "html-button-response",
            stimulus: "Do you understand both theories and see the differences between them?",
            choices: ['YES','NO'], 
        };
            timeline.push(question_b);

            var question_c = {    
            type: "html-button-response",
            stimulus: "Which of the two theories best match your own experience?",
            choices: ['First Theory','Second Theory','I Do Not Know'], 
        };
            timeline.push(question_c);

            var question_d = {    
            type: "html-button-response",
            stimulus: "Does the other theory still seem plausible?",
            choices: ['Yes','No','I Do Not Know'], 
        };
            timeline.push(question_d);
           
            var question_e = {    
            type: "html-button-response",
            stimulus: "Is it correct that you saw certain letters in detail but others in a less precise way?",
            choices: ['Correct','Not Correct'], 
        };
            timeline.push(question_e);

            var question_f = {    
            type: "html-button-response",
            stimulus: "Did you sometimes feel like you saw a letter in detail, but then failed to report it?",
            choices: ['Yes','No','I Do Not Know'], 
        };
            timeline.push(question_f);

            var question_gandh = {    
            type: "html-button-response",
            stimulus: "Why did you fail to report it?",
            choices: ['I failed to identify it as a specific letter at the time','I was able to identify the letter at the time but I was unable to keep it in memory long enough'], //add neither?
        };
            timeline.push(question_gandh);
            
            var question_i = {
            type: "survey-text",
            questions: [
                {prompt: "How many letters, on average, did you have the impression to see in detail?"}, 
                ],
        };
            timeline.push(question_i);

        
            //debriefing screen

            var exit = {
  		    type: "html-keyboard-response",
  		    stimulus: "You have finished the experiment! Press any key to exit."
	    };
            timeline.push(exit);
        
        
            
    jsPsych.init({
  	timeline: timeline,
  	show_progress_bar: true,
  	on_finish: function() {
      	jsPsychSheet.uploadData(jsPsych.data.get().csv());
  }
});

    </script>
</html>
